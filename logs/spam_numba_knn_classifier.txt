Timer unit: 1e-06 s

Total time: 0 s
File: /u/g/gcanali/miniconda3/envs/devtools_scicomp/lib/python3.9/site-packages/pyclassify/utils.py
Function: distance_numpy at line 11

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
    11                                           @profile
    12                                           def distance_numpy(point1: np.ndarray, point2: np.ndarray) -> float:
    13                                               d = point1-point2
    14                                               return np.dot(d,d)

Total time: 0 s
File: /u/g/gcanali/miniconda3/envs/devtools_scicomp/lib/python3.9/site-packages/pyclassify/utils.py
Function: distance_numba at line 16

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
    16                                           @profile
    17                                           def distance_numba(point1: np.ndarray, point2: np.ndarray) -> float:
    18                                               return _distance_numba_compiled(point1, point2)

Total time: 0.0179846 s
File: /u/g/gcanali/miniconda3/envs/devtools_scicomp/lib/python3.9/site-packages/pyclassify/utils.py
Function: majority_vote at line 20

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
    20                                           @profile
    21                                           def majority_vote(neighbors: list[int]) -> int:
    22      3681      17984.6      4.9    100.0      return max(set(neighbors), key=neighbors.count)

Total time: 44.4696 s
File: /u/g/gcanali/miniconda3/envs/devtools_scicomp/lib/python3.9/site-packages/pyclassify/utils.py
Function: distance at line 7

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
     7                                           @profile
     8                                           def distance(point1: list[float], point2: list[float]) -> float:
     9   3386520   44469624.8     13.1    100.0      return sum((p1 - p2)**2 for p1, p2 in zip(point1, point2))

Total time: 51.1788 s
File: /u/g/gcanali/miniconda3/envs/devtools_scicomp/lib/python3.9/site-packages/pyclassify/classifier.py
Function: _get_k_nearest_neighbors at line 25

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
    25                                               @profile
    26                                               def _get_k_nearest_neighbors(
    27                                                       self,
    28                                                       X: list[list[float]],
    29                                                       y: list[int],
    30                                                       x: list[float]
    31                                                   ) -> list[int]:
    32      3681   50299046.2  13664.5     98.3          dist = [distance(x, point) for point in X]
    33      3681     865621.4    235.2      1.7          sorted_neighbors = sorted(enumerate(dist), key=lambda pair: pair[1])
    34      3681      13621.9      3.7      0.0          k_neighbors = [y[i] for i, _ in sorted_neighbors[:self.k]]
    35      3681        496.6      0.1      0.0          return k_neighbors

Total time: 51.2856 s
File: /u/g/gcanali/miniconda3/envs/devtools_scicomp/lib/python3.9/site-packages/pyclassify/classifier.py
Function: __call__ at line 37

Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
    37                                               @profile
    38                                               def __call__(
    39                                                       self,
    40                                                       data: tuple[list[list[float]], list[int]],
    41                                                       new_points: list[list[float]]
    42                                                   ):
    43         1          0.9      0.9      0.0          X, y = data
    44                                           
    45         1          0.7      0.7      0.0          if self.backend == 'numpy':
    46                                                       X = np.array(X)
    47                                                       new_points = np.array(new_points)
    48                                           
    49         2   51285619.1    3e+07    100.0          return [
    50                                                       majority_vote(
    51                                                           self._get_k_nearest_neighbors(X, y, point)
    52                                                       )
    53         1          0.1      0.1      0.0              for point in new_points
    54                                                   ]

  0.00 seconds - /u/g/gcanali/miniconda3/envs/devtools_scicomp/lib/python3.9/site-packages/pyclassify/utils.py:11 - distance_numpy
  0.00 seconds - /u/g/gcanali/miniconda3/envs/devtools_scicomp/lib/python3.9/site-packages/pyclassify/utils.py:16 - distance_numba
  0.02 seconds - /u/g/gcanali/miniconda3/envs/devtools_scicomp/lib/python3.9/site-packages/pyclassify/utils.py:20 - majority_vote
 44.47 seconds - /u/g/gcanali/miniconda3/envs/devtools_scicomp/lib/python3.9/site-packages/pyclassify/utils.py:7 - distance
 51.18 seconds - /u/g/gcanali/miniconda3/envs/devtools_scicomp/lib/python3.9/site-packages/pyclassify/classifier.py:25 - _get_k_nearest_neighbors
 51.29 seconds - /u/g/gcanali/miniconda3/envs/devtools_scicomp/lib/python3.9/site-packages/pyclassify/classifier.py:37 - __call__
